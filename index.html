<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MealPlan App Preview</title>
    <!-- React -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <!-- Babel Standalone -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/prop-types/prop-types.js"></script>
    <script src="https://unpkg.com/recharts/umd/Recharts.js" crossorigin></script>

    <!-- Include basic root styles -->
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <!-- Mock CommonJS environment for Babel standalone -->
    <script>
        window.require = function (moduleName) {
            if (moduleName === 'react') return window.React;
            throw new Error(`Cannot resolve module '${moduleName}'`);
        };
        window.exports = {};
        window.module = { exports: window.exports };
    </script>

    <!-- Load and compile the JSX file using react and env presets -->
    <script type="text/babel" data-presets="react,env" src="mealplan-app.jsx"></script>

    <!-- Mount script -->
    <script type="text/babel">
        const root = ReactDOM.createRoot(document.getElementById('root'));

        // Give Babel a moment to compile and load the external script
        setTimeout(() => {
            // Babel usually compiles `export default function App` to `exports.default = App`
            const App = window.exports.default || window.App || window.module.exports.default;

            if (App) {
                root.render(<App />);
            } else {
                console.error("Exports:", window.exports);
                document.getElementById('root').innerHTML = "Could not find main App component to render. Check console.";
            }
        }, 1000); // 1 second timeout to ensure compilation is done
    </script>
</body>

</html>